# 트랜잭션 이해

DB에서 트랜잭션은 하나의 거래를 안전하게 처리해주도록 보장해주는 것을 뜻함

`Commit`: 모든 작업이 성공해서 DB에 정상 반영

`Rollback`: 작업 중 하나라도 실패하면 이전으로 되돌리는 것

---

## 트랜잭션 ACID

+ 원자성(Atomicity): 트랜잭션 내에서 실행한 작업들은 하나의 작업인 것처럼 모두 성공 하거나 실패해야 한다.
+ 일관성(Consistency): 모든 트랜잭션은 일관성 있는 DB 상태를 유지해야 한다. 
+ 격리성(Isolation): 동시에 실행되는 트랜잭션들이 서로에게 영향을 미치지 않도록 격리해야 한다.
+ 지속성(Durability): 트랜잭션을 성공적으로 끝내면 그 결과가 항상 기록되어야 한다. 

---

## DB 연결 구조와 DB 세션

사용자는 WAS나 DB접근 툴 같은 클라이언트를 사용하여 DB 서버에 접근할 수 있다. 

이때 DB 서버는 내부에 세션이라는 것을 만들고 커넥션을 통한 모든 요청은 세션을 통해 실행된다.

세션: 트랜잭션을 시작하고, 커밋 또는 롤백을 통해 종료

커넥션을 닫거나 세션을 강제료 종료하면 세션은 종료

---

## 트랜잭션 - DB 예제1

---

### 트랜잭션 사용법

+ 쿼리를 실행하고 결과를 반영하기 위해 `commit`을 호출하고 반영하지 않으려면 `rollback`을 호출하면 된다.
+ `commit`이 호출되기 전까지는 임시로 데이터를 저장하는 것


### 자동 커밋, 수동 커밋

+ 자동 커밋: 자동 커밋은 쿼리 실행 직후 자동으로 커밋을 호출한다.
+ 수동 커밋: 수동 커밋모드로 설정하는 것을 트랜잭션을 시작 한다고 표현할 수 있다.
  + 수동 커밋을 설정하면 commit, rollback을 반드시 호출해야 한다.

